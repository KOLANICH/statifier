Starter Layout for Alpha

Statified executable has following layout:

Offset                               End
0                                    of file
+--------------+------------+---------+
| executable's | libraries' | starter |
| segments     | segments   | segment |
+---------+--------------+------------+

And it should be in the ELF format.

Here starter segment format not so importent
but I like to keep it exactly as for x86 layout, i.e

+--------------+---------+---------+--------------+
|     Ehdr     | N Phdrs | M Shdrs | Starter Code |
+--------------+---------+---------+--------------+
               ^         ^         ^
e_phnum = N    |         |         |
e_phoff -------+         |         |
                         |         |
e_shnum = M              |         |
e_shoff -----------------+         |
                                   |
e_entry ---------------------------+

Ehdr is Ehdr from original executable with following fields changed:

e_phnum = N - number of segments in the statified executable
e_phoff     - pointed to the start of Phdrs
e_entry     - pointed to the start of Starter Code 

Phdrs generated from the Starter Code size and 
all loaded segments.

Where Shdrs copied from original executable
(and their offset from beginning of the file unlike x86
should not be changed)

So far so good. But...
Real program Ehdr (saved as part of first executable segment)
was not updated. It has e_entry, e_phnum, etc from original
executable and know nothing about my wish statify it.

In order to make Ehdr in statified execitable "up-to-date"
I need to copy ehdr from starter segment to statified exe.


Size of starter segments.

Because I add starter segment after any others, it does not matter.
But once again, to keep it like starter segment for x86 it size
should be multiple of the first executable load segment's p_align.

